<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>
crate thin_delegate ã‚’æ›¸ã„ãŸ (1&#x2F;4) | å†·ãŸãæ²¢ã®å²©é™°ã®
</title>

        
<meta property="og:image" content="https:&#x2F;&#x2F;kenoss.github.io&#x2F;ogp.jpg" />
<meta property="og:title" content="crate thin_delegate ã‚’æ›¸ã„ãŸ (1&#x2F;4)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https:&#x2F;&#x2F;kenoss.github.io&#x2F;blog&#x2F;2025-01-02-thin_delegate-1&#x2F;" />

<meta property="og:site_name" content="å†·ãŸãæ²¢ã®å²©é™°ã®" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@keno_ss" />


        



        <link rel="stylesheet" href="https://kenoss.github.io/theme.css">
    </head>
    <body>
        <div class="content">
            <header>
                <div class="header-left">
                    <a href="https:&#x2F;&#x2F;kenoss.github.io" class="header-logo">å†·ãŸãæ²¢ã®å²©é™°ã®</a>
                </div>
                <div class="header-right">
                </div>
            </header>
            <main>
                
<article itemscope itemtype="http://schema.org/BlogPosting">
    <div class="headline" itemprop="headline">
        <h1 class="post-title">crate thin_delegate ã‚’æ›¸ã„ãŸ (1&#x2F;4)</h2>
        <div class="border"></div>
        <div>
            <time datetime="2025-01-02" class="post-date" itemprop="datePublished">
                2025-01-02
            </time>
            
                |
                
                    <span class="post-tag">ğŸ¦€ rust</span>
                
                    <span class="post-tag">ğŸ¦€ tech</span>
                
                    <span class="post-tag">ğŸ¦€ thin_delegate</span>
                
                        
        </div>
    </div>
    <div itemprop="articleBody">
        <ul>
<li><a href="../2025-01-02-thin_delegate-1">1ç« : <code>thin_delegate</code> ã®ç´¹ä»‹</a></li>
<li><a href="../2025-01-03-thin_delegate-2">2ç« : proc macro é–“ã§ã®æƒ…å ±ä¼é”ã¨ delegation crate æ¯”è¼ƒ</a></li>
<li><a href="../2025-01-04-thin_delegate-3">3ç« : <code>thin_delegate</code> ã®è¨­è¨ˆã¨å®Ÿè£…</a></li>
<li><a href="../2025-01-05-thin_delegate-4">4ç« : ã¾ã¨ã‚</a></li>
</ul>
<h2 id="crate-thin-delegate-woshu-ita">crate <code>thin_delegate</code> ã‚’æ›¸ã„ãŸ</h2>
<p><a href="https://github.com/kenoss/thin_delegate"><code>thin_delegate</code></a> ã¨ã„ã† crate ã‚’æ›¸ãã¾ã—ãŸ.
thin_delegate ã¯ <strong>trait method <sup class="footnote-reference"><a href="#101">1</a></sup> ã‚’ delegation ã«ã‚ˆã£ã¦è‡ªå‹•ç”Ÿæˆã™ã‚‹ proc macro</strong> ã‚’æä¾›ã—ã¾ã™.
ã“ã®ã‚ˆã†ãª crate ã¯ä»–ã«ã‚‚ã‚ã‚Šã¾ã™ãŒ, <a href="https://github.com/kenoss/sabiniwm"><code>sabiniwm</code></a> ã‚’å®Ÿè£…ã™ã‚‹ä¸Šã§è‰²ã€…åˆ¶é™ãŒã‚ã£ãŸã‚Šæ©Ÿèƒ½ãŒè¶³ã‚Šã¾ã›ã‚“ã§ã—ãŸ.
thin_delegate ã¯</p>
<ul>
<li>åˆ¶é™ãŒ (ã»ã¼) ãªãä½¿ã„ã‚„ã™ã„ API ã¨ä¸å¯§ãªã‚¨ãƒ©ãƒ¼</li>
<li>è‰¯ã„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ (auto impl for thin delegation) ã¨æŸ”è»Ÿãªä¾‹å¤–ã¸ã®å¯¾å¿œ</li>
<li>ã€Œåˆæ³•ãªå®Ÿè£…ã€</li>
</ul>
<p>ãŒç‰¹å¾´ã§ã™.</p>
<p>ä½œæˆã«ã‚ãŸã£ã¦è‰²ã€…å‹‰å¼·ã«ãªã£ãŸã®ã§è¨˜äº‹ã¨ã—ã¦çºã‚ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™. 4ã¤ã®è¨˜äº‹ (ç« ) ã«åˆ†ã‘ã¦é€£æŠ•ã—ã¦ã„ãã¾ã™.</p>
<ul>
<li><a href="../2025-01-02-thin_delegate-1">1ç« </a> (ã“ã®è¨˜äº‹) ã§ã¯ thin_delegate ãŒæ‰±ã†å•é¡Œã¨å…·ä½“çš„ãªä½¿ã„æ–¹ã‚’ç´¹ä»‹ã—ã¾ã™.</li>
<li><a href="../2025-01-03-thin_delegate-2">2ç« </a> ã§ã¯ã“ã®ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦è¤‡æ•°ã® proc macro é–“ã§æƒ…å ±ã‚’ä¼é”ã™ã‚‹æ–¹æ³•ã®åˆ†é¡, ãŠã‚ˆã³æ—¢å­˜ crate ã®ç´¹ä»‹ãƒ»è©•ä¾¡ã‚’è¡Œã„ã¾ã™.
ã€Œåˆæ³•ãªå®Ÿè£…ã€ã¨ã¯ä½•ã‹ã«ã¤ã„ã¦ã‚‚ã“ã“ã§è¿°ã¹ã¾ã™.</li>
<li><a href="../2025-01-04-thin_delegate-3">3ç« </a> ã§ã¯ thin_delegate ã®è¨­è¨ˆãŠã‚ˆã³å®Ÿè£…è©³ç´°ã«ã¤ã„ã¦è¿°ã¹ã¾ã™.</li>
<li><a href="../2025-01-05-thin_delegate-4">4ç« </a> ã§ã¯å…¨ä½“ã®ã¾ã¨ã‚ã‚’è¿°ã¹ã¾ã™.</li>
</ul>
<p>crate ã‚’ä½¿ã„ãŸã„ã ã‘ã§ã‚ã‚Œã°1ç« ã ã‘è¦‹ã‚Œã°ååˆ†ã§ã™.
2ç« ä»¥é™ã¯å†…éƒ¨å®Ÿè£…ã®è©±ã«ãªã‚Šã¾ã™.</p>
<p>é•·ããªã‚Šã¾ã™ãŒå¹´æœ«å¹´å§‹ã®ãŠèŒ¶è«‹ã‘ã«ã§ã‚‚ã©ã†ã.</p>
<h2 id="1zhang-thin-delegate-noshao-jie">1ç« : <code>thin_delegate</code> ã®ç´¹ä»‹</h2>
<h3 id="wen-ti-trait-method-to-delegation">å•é¡Œ: trait method ã¨ delegation</h3>
<p>delegation (å§”è­²) ã¨ã¯å‡¦ç†ã‚’ä»–ã®èª°ã‹ã«å§”è­²ã™ã‚‹ã“ã¨ã‚’æŒ‡ã™ã‚‰ã—ã„ã§ã™.</p>
<p><a href="https://en.wikipedia.org/wiki/Delegation_pattern">Wikipedia -- Delegation pattern</a> ã‹ã‚‰å¼•ç”¨ã—ã¾ã™.</p>
<pre data-lang="kotlin" style="background-color:#2b303b;color:#c0c5ce;" class="language-kotlin "><code class="language-kotlin" data-lang="kotlin"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Rect</span><span>(</span><span style="color:#b48ead;">val </span><span>width: </span><span style="color:#b48ead;">Int</span><span>, </span><span style="color:#b48ead;">val </span><span>height: </span><span style="color:#b48ead;">Int</span><span>) {
</span><span>    </span><span style="color:#b48ead;">fun </span><span style="color:#8fa1b3;">area</span><span>() = width * height
</span><span>}
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Window</span><span>(</span><span style="color:#b48ead;">val </span><span>bounds: Rect) {
</span><span>    </span><span style="color:#65737e;">// Delegation
</span><span>    </span><span style="color:#b48ead;">fun </span><span style="color:#8fa1b3;">area</span><span>() = bounds.area()
</span><span>}
</span></code></pre>
<p>ã“ã®ä¾‹ã§ã¯ <code>Window</code> ãŒ <code>bounds: Rect</code> field ã‚’æŒã¡, æ˜ç¤ºçš„ã« <code>Window::area()</code> ã‚’ <code>Rect::area()</code> ã« delegate
ã—ã¦ã„ã¾ã™.</p>
<pre data-lang="kotlin" style="background-color:#2b303b;color:#c0c5ce;" class="language-kotlin "><code class="language-kotlin" data-lang="kotlin"><span style="color:#b48ead;">interface </span><span style="color:#ebcb8b;">ShapeI</span><span> {
</span><span>    </span><span style="color:#b48ead;">fun </span><span style="color:#8fa1b3;">area</span><span>(): </span><span style="color:#b48ead;">Int
</span><span>}
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Rect</span><span>(</span><span style="color:#b48ead;">val </span><span>width: </span><span style="color:#b48ead;">Int</span><span>, </span><span style="color:#b48ead;">val </span><span>height: </span><span style="color:#b48ead;">Int</span><span>) : </span><span style="color:#a3be8c;">ShapeI</span><span> {
</span><span>    </span><span style="color:#b48ead;">override fun </span><span style="color:#8fa1b3;">area</span><span>() = width * height
</span><span>}
</span><span>
</span><span style="color:#65737e;">// The ShapeI implementation of Window delegates to that of the Rect that is bounds
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Window</span><span>(</span><span style="color:#b48ead;">private val </span><span>bounds: Rect) : </span><span style="color:#a3be8c;">ShapeI by bounds
</span></code></pre>
<p>ã“ã®ä¾‹ã§ã¯ <code>Window</code> ãŒ <code>bounds: Rect</code> ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒã¡, <code>ShapeI</code> ã¨ã„ã† interface ã‚’ <code>Rect</code> ã« delegate
ã—ã¦ã„ã¾ã™.</p>
<p>å³å¯†ã«ã¯
<a href="https://en.wikipedia.org/wiki/Delegation_pattern">delegation</a> ã¨
<a href="https://en.wikipedia.org/wiki/Forwarding_(object-oriented_programming)">forwarding</a> ã¨
<a href="https://en.wikipedia.org/wiki/Proxy_pattern">proxy</a> ã¨
<a href="https://en.wikipedia.org/wiki/Facade_pattern">facade</a>
ã¯é•ã†!ã‚‚ã£ã¨ã‚ˆãè¦‹ã‚!!ã¨è¨€ã‚ã‚Œãã†ã§ã™ãŒ, ã“ã®è¨˜äº‹ã§ã¯åŒºåˆ¥ã›ãš delegation ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™.
(ç­†è€…ã¯é•ã„ã‚’çŸ¥ã‚‰ãªã„ã—èˆˆå‘³ã‚‚ãªã„.)</p>
<p>Rust ã§æ›¸ãã¨ä»¥ä¸‹ã®æ§˜ãªæ„Ÿã˜ã§ã—ã‚‡ã†ã‹.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">trait </span><span>ShapeI {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">area</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">f64</span><span>;
</span><span>}
</span><span>
</span><span style="color:#b48ead;">struct </span><span>Rect {
</span><span>    </span><span style="color:#bf616a;">width</span><span>: </span><span style="color:#b48ead;">f64</span><span>,
</span><span>    </span><span style="color:#bf616a;">height</span><span>: </span><span style="color:#b48ead;">f64</span><span>,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">struct </span><span>Window {
</span><span>    </span><span style="color:#bf616a;">rect</span><span>: Rect,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>ShapeI </span><span style="color:#b48ead;">for </span><span>Rect {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">area</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">f64 </span><span>{
</span><span>        </span><span style="color:#bf616a;">self</span><span>.width * </span><span style="color:#bf616a;">self</span><span>.height
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>ShapeI </span><span style="color:#b48ead;">for </span><span>Window {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">area</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">f64 </span><span>{
</span><span>        ShapeI::area(&amp;</span><span style="color:#bf616a;">self</span><span>.rect) </span><span style="color:#65737e;">// (1-1)
</span><span>    }
</span><span>}
</span></code></pre>
<p>trait ã‚’ä½¿ã£ã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãš (1-1) ã§æ˜ç¤ºçš„ã« delegation ã—ã¦ã„ã¾ã™.
ã“ã‚ŒãŒã“ã®è¨˜äº‹ã®ä¸»é¡Œã§ã™. ã™ãªã‚ã¡
<strong>Rust ã§ trait method ã‚’ delegation ã™ã‚‹ã®ã‚’æ¥½ã«ã—ãŸã„</strong>
ã§ã™.
ç°¡å˜ã®ãŸã‚, ä¸€é€£ã®è¨˜äº‹ã§ã¯ <strong>trait method ã®è‡ªå‹• delegation</strong> ã¨å‘¼ç§°ã—ã¾ã™.</p>
<p>ã“ã®ä¾‹ã§ã¯ method ãŒã²ã¨ã¤ãªã®ã§æ‰‹å‹•ã§ã‚„ã£ã¦ã‚‚åˆ¥ã«å•é¡Œã«ã¯ãªã‚Šã¾ã›ã‚“. ã—ã‹ã—è¨˜è¿°ãŒç…©é›‘ã«ãªã‚‹è¦ç´ ã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™:</p>
<ul>
<li>method ã®æ•° (3å€‹ä»¥ä¸Šã ã¨ã—ã‚“ã©ã„.)</li>
<li>method ã®å¼•æ•° (<code>self</code> ä»¥å¤–ãŒç”ŸãˆãŸç¬é–“ã«ã—ã‚“ã©ã„.)</li>
<li>enum variant ã®æ•° (enum ã«ãªã£ãŸç¬é–“ã«ã—ã‚“ã©ã„.)</li>
<li>ç¶™ç¶šçš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ (trait å®šç¾©ã‚’å¤‰ãˆãŸã‚Šå¤–éƒ¨ crate ã® update ã§å¤‰ã‚ã£ãŸã‚Šã—ãŸã¨ãã«çµ¶æœ›.)</li>
</ul>
<p>ã¨ã„ã†ã‚ã‘ã§, è‡ªå‹•ã§ã§ãã‚‹ãªã‚‰è‡ªå‹•ã§ã‚„ã£ãŸæ–¹ãŒè‰¯ã„ã§ã™. é¢å€’ãªã“ã¨ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«ã‚„ã‚‰ã›ã‚ˆã†.</p>
<h3 id="jie-fa-thin-delegate">è§£æ³•: <code>thin_delegate</code></h3>
<p>proc macro <code>thin_delegate</code> ã¯ã“ã®å•é¡Œã‚’è§£æ±ºã—ã¾ã™.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">register</span><span>] </span><span style="color:#65737e;">// (1-2)
</span><span style="color:#b48ead;">trait </span><span>ShapeI {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">area</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">f64</span><span>;
</span><span>}
</span><span>
</span><span style="color:#b48ead;">struct </span><span>Rect {
</span><span>    </span><span style="color:#bf616a;">width</span><span>: </span><span style="color:#b48ead;">f64</span><span>,
</span><span>    </span><span style="color:#bf616a;">height</span><span>: </span><span style="color:#b48ead;">f64</span><span>,
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">register</span><span>] </span><span style="color:#65737e;">// (1-3)
</span><span style="color:#b48ead;">struct </span><span>Window {
</span><span>    </span><span style="color:#bf616a;">rect</span><span>: Rect,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>ShapeI </span><span style="color:#b48ead;">for </span><span>Rect {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">area</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">f64 </span><span>{
</span><span>        </span><span style="color:#bf616a;">self</span><span>.width * </span><span style="color:#bf616a;">self</span><span>.height
</span><span>    }
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>]
</span><span style="color:#b48ead;">impl </span><span>ShapeI </span><span style="color:#b48ead;">for </span><span>Window {} </span><span style="color:#65737e;">// (1-4)
</span></code></pre>
<p>ã¾ãš trait å®šç¾© (1-2) ã¨ struct å®šç¾© (1-3) ã« <code>#[thin_delegate::register]</code> ã‚’ä»˜ã‘ã¾ã™.
ãã†ã™ã‚‹ã¨ (1-4) ã® <code>impl ShapeI for Window {}</code> ã®ã¨ã“ã‚ã§ <code>#[thin_delegate::fill_delegate]</code>
ãŒè‡ªå‹•ã§ (1-1) ã®æ§˜ãªã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ <sup class="footnote-reference"><a href="#102">2</a></sup>.</p>
<p>thin_delegate ã«ã¯ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒ, ä¸»è¦ãªã‚‚ã®ã‚’ç´¹ä»‹ã—ã¾ã™.</p>
<ul>
<li>ergonomic <sup class="footnote-reference"><a href="#103">3</a></sup></li>
<li>ã‚¨ãƒ©ãƒ¼ãŒèª­ã¿ã‚„ã™ã„ <sup class="footnote-reference"><a href="#104">4</a></sup></li>
<li>Generics, trait bound, GATs ãªã©ã®åˆ¶é™ãªã— (ã®ã¯ãš. é§„ç›®ãªã‚±ãƒ¼ã‚¹ãŒç™ºè¦‹ã•ã‚Œã¦ãªã„ã ã‘ <sup class="footnote-reference"><a href="#105">5</a></sup>.)</li>
<li>å¤–éƒ¨ crate ã® trait å®šç¾©ã‚’åˆ©ç”¨ã™ã‚‹ (<code>external_trait_def</code>)
<ul>
<li><a href="https://github.com/kenoss/thin_delegate/blob/main/tests/ui/pass_external_trait_def.rs">åŸºæœ¬</a></li>
<li><a href="https://github.com/kenoss/thin_delegate/blob/main/tests/ui/pass_external_trait_def_with_uses.rs"><code>with_uses</code> ã§è‡ªå‹•ã§ <code>use</code> ã™ã‚‹</a></li>
</ul>
</li>
<li>ãƒ¡ã‚½ãƒƒãƒ‰ç”Ÿæˆãƒ«ãƒ¼ãƒ«ã‚’å¼„ã£ã¦è‡ªæ˜ã˜ã‚ƒãªã„ delegation ã‚’ã™ã‚‹ (<code>scheme</code>) <sup class="footnote-reference"><a href="#106">6</a></sup>
<ul>
<li><a href="https://github.com/kenoss/thin_delegate/blob/main/tests/ui/pass_scheme.rs">struct</a></li>
<li><a href="https://github.com/kenoss/thin_delegate/blob/main/tests/ui/pass_scheme_enum.rs">enum</a></li>
</ul>
</li>
<li><a href="https://github.com/kenoss/thin_delegate/blob/main/tests/ui/pass_items_in_impl.rs">æ‰‹å‹•ã§å®Ÿè£…ã—ãŸã„éƒ¨åˆ†ã¯æ‰‹å‹•ã§å®Ÿè£…å¯èƒ½</a> <sup class="footnote-reference"><a href="#107">7</a></sup></li>
</ul>
<p>åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¯ <a href="https://docs.rs/thin_delegate/latest/thin_delegate/">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a> ã‚’èª­ã‚“ã§ãã ã•ã„.</p>
<p>é–¢é€£ã™ã‚‹ RFC ã¨ã—ã¦
<a href="https://github.com/rust-lang/rfcs/pull/1406">rfcs#1406</a>,
<a href="https://github.com/rust-lang/rfcs/pull/2393">rfcs#2393</a>,
<a href="https://github.com/rust-lang/rfcs/pull/3530">rfcs#3530</a>
ãŒã‚ã‚Šã¾ã™.</p>
<h3 id="real-world-example-sabiniwm">Real world example: sabiniwm</h3>
<p>å®Ÿéš›ã®ä½¿ã„æ–¹ã¨ã—ã¦ sabiniwm (commit <a href="https://github.com/kenoss/sabiniwm/tree/ed5d2c9">1904a51</a>) ã‚’è¦‹ã¦ã¿ã¾ã™.</p>
<h4 id="external-trait-def">external_trait_def</h4>
<p>ã¾ãšåŸºæœ¬çš„ã« sabiniwm ã¯ smithay ãªã©ã®å¤–éƒ¨ crate ã® trait ã‚’ãŸãã•ã‚“ä½¿ã£ã¦ã„ã¾ã™.
delegate å¯¾è±¡ã®å¤–éƒ¨ crate ã® trait ã¯
<a href="https://github.com/kenoss/sabiniwm/blob/1904a51bd3346154a60551cda70f6bfd0f3b63f2/crates/sabiniwm/src/external_trait_def.rs">crates/sabiniwm/src/external_trait_def.rs</a>
ã§ç®¡ç†ã—ã¦ã„ã¾ã™. <code>mod</code> ã« <code>#[thin_delegate::external_trait_def(with_uses = true)]</code> ã‚’ä»˜ã‘,</p>
<ol>
<li>ã“ã® <code>mod</code> ã¯å¤–éƒ¨ crate ã® trait ã‚’ã‚³ãƒ”ãƒšã™ã‚‹ãŸã‚ã®å ´æ‰€ã§ã‚ã‚‹ã“ã¨,</li>
<li><code>#[thin_delegate::fill_delegate]</code> ã—ãŸã¨ãã«è‡ªå‹•ã§ <code>use</code> ã™ã¹ãã“ã¨,</li>
</ol>
<p>ã‚’å®£è¨€ã—ã¦ã„ã¾ã™. ãã®ä¸­ã« <code>#[thin_delegate::register]</code> ã‚’æ›¸ã„ã¦ã„ãã¾ã™.</p>
<p>trait ã®å®šç¾©ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã¯ <code>external_trait_def</code> ã®è©²å½“éƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒšã§æ›´æ–°ã™ã‚‹ã ã‘ã§ã™.</p>
<h4 id="focus-rs">focus.rs</h4>
<p>å®Ÿéš›ã«åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã¯ä¾‹ãˆã°
<a href="https://github.com/kenoss/sabiniwm/blob/1904a51bd3346154a60551cda70f6bfd0f3b63f2/crates/sabiniwm/src/focus.rs">crates/sabiniwm/src/focus.rs</a>
ã§ã™.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(derive_more::From, Debug, Clone, PartialEq)]
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">register</span><span>]
</span><span style="color:#b48ead;">pub enum </span><span>PointerFocusTarget {
</span><span>    WlSurface(smithay::reexports::wayland_server::protocol::wl_surface::WlSurface),
</span><span>    X11Surface(smithay::xwayland::X11Surface),
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(external_trait_def = crate::external_trait_def::smithay::utils)]
</span><span style="color:#b48ead;">impl </span><span>smithay::utils::IsAlive </span><span style="color:#b48ead;">for </span><span>PointerFocusTarget {}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(external_trait_def = crate::external_trait_def::smithay::input::pointer)]
</span><span style="color:#b48ead;">impl </span><span>smithay::input::pointer::PointerTarget&lt;SabiniwmState&gt; </span><span style="color:#b48ead;">for </span><span>PointerFocusTarget {}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(external_trait_def = crate::external_trait_def::smithay::input::touch)]
</span><span style="color:#b48ead;">impl </span><span>smithay::input::touch::TouchTarget&lt;SabiniwmState&gt; </span><span style="color:#b48ead;">for </span><span>PointerFocusTarget {}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(external_trait_def = crate::external_trait_def::smithay::wayland::seet)]
</span><span style="color:#b48ead;">impl </span><span>smithay::wayland::seat::WaylandFocus </span><span style="color:#b48ead;">for </span><span>PointerFocusTarget {}
</span></code></pre>
<p>ã“ã‚Œã¯å˜ç´”ã§ã™ã­. <code>PointerFocusTarget</code> ã«å¯¾ã—ã¦ä¾‹ãˆã° <code>smithay::input::pointer::PointerTarget</code> ã‚’ impl ã™ã‚‹ãŸã‚ã« trait å®šç¾©ã‚’
<code>crate::external_trait_def::smithay::input::pointer</code> ã‹ã‚‰å¼•ã„ã¦ã„ã¾ã™.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(derive_more::From, Debug, Clone, PartialEq)]
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">register</span><span>]
</span><span style="color:#b48ead;">pub enum </span><span>KeyboardFocusTarget {
</span><span>    Window(smithay::desktop::Window),
</span><span>    LayerSurface(smithay::desktop::LayerSurface),
</span><span>    Popup(smithay::desktop::PopupKind),
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(external_trait_def = crate::external_trait_def::smithay::utils)]
</span><span style="color:#b48ead;">impl </span><span>smithay::utils::IsAlive </span><span style="color:#b48ead;">for </span><span>KeyboardFocusTarget {}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(
</span><span>    external_trait_def = crate::external_trait_def::smithay::input::keyboard,
</span><span>    scheme = |f| {
</span><span>        match self {
</span><span>            Self::</span><span style="color:#bf616a;">Window</span><span>(w) =&gt; match w.</span><span style="color:#bf616a;">underlying_surface</span><span>() { // (1-5)
</span><span>                </span><span style="color:#bf616a;">smithay</span><span>::</span><span style="color:#bf616a;">desktop</span><span>::</span><span style="color:#bf616a;">WindowSurface</span><span>::</span><span style="color:#bf616a;">Wayland</span><span>(s) =&gt; </span><span style="color:#bf616a;">f</span><span>(s.</span><span style="color:#bf616a;">wl_surface</span><span>()),
</span><span>                </span><span style="color:#bf616a;">smithay</span><span>::</span><span style="color:#bf616a;">desktop</span><span>::</span><span style="color:#bf616a;">WindowSurface</span><span>::</span><span style="color:#bf616a;">X11</span><span>(s) =&gt; </span><span style="color:#bf616a;">f</span><span>(s),
</span><span>            }
</span><span>            </span><span style="color:#bf616a;">Self</span><span>::</span><span style="color:#bf616a;">LayerSurface</span><span>(l) =&gt; </span><span style="color:#bf616a;">f</span><span>(l.</span><span style="color:#bf616a;">wl_surface</span><span>()),
</span><span>            </span><span style="color:#bf616a;">Self</span><span>::</span><span style="color:#bf616a;">Popup</span><span>(p) =&gt; </span><span style="color:#bf616a;">f</span><span>(p.</span><span style="color:#bf616a;">wl_surface</span><span>()),
</span><span>        }
</span><span>    }
</span><span>)]
</span><span style="color:#b48ead;">impl </span><span>smithay::input::keyboard::KeyboardTarget&lt;SabiniwmState&gt; </span><span style="color:#b48ead;">for </span><span>KeyboardFocusTarget {}
</span></code></pre>
<p>ã“ã¡ã‚‰ã¯ <code>impl smithay::input::keyboard::KeyboardTarget</code> ã«å¯¾ã—ã¦ <code>scheme</code> ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã™.
(1-5) ã®ã¨ã“ã‚ã§ <code>Window</code> ã® arm ã«å¯¾ã—ã¦ <code>smithay::desktop::Window::underlying_surface()</code> ã§åˆ†å²ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™.
(ã“ã‚Œã¯æ›´ã« wrapper struct ã‚’å™›ã¾ã›ã¦ã‚‚ã„ã„ã®ã§ã™ãŒ, çµå±€ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ã«ãªã‚‹ã®ã§ã“ã†ã—ã¦ã„ã¾ã™.)</p>
<p>ã¡ãªã¿ã« <a href="https://smithay.github.io/smithay/smithay/input/keyboard/trait.KeyboardTarget.html"><code>KeyboardTarget</code> ã®å®šç¾©</a>
ã¯æ‰‹ã§ç®¡ç†ã—ãŸããªã„ç¨‹åº¦ã«ã¯è¤‡é›‘ã§ã™.</p>
<p>(sabiniwm ã¯ anvil ã® fork ã§ã‚ã‚Š) ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯
<a href="https://github.com/Smithay/smithay/blob/8e49b9bb1849f0ead1ba2c7cd76802fc12ad6ac3/anvil/src/focus.rs">smithay/anvil/src/focus.rs</a>
ã‚’å…ƒã«ã—ã¦ã„ã¾ã™. æ›¸ãæ›ãˆã®å±¥æ­´ (ä¸€éƒ¨æŠœç²‹
<a href="https://github.com/kenoss/sabiniwm/commit/78f082cf0b10630d2af0c5fc1ec94209125ffaa0">78f082c</a>,
<a href="https://github.com/kenoss/sabiniwm/commit/ffcb2dc59a7a046ae4618eeb60571145cd3f7688">ffcb2dc</a>,
<a href="https://github.com/kenoss/sabiniwm/commit/ed5d2c9cc199dd3358b33e8ef700e31fc39ea6ed">ed5d2c9</a>
) ã‚’è¿½ã†ã¨äººé–“ãŒç®¡ç†å¯èƒ½ã«ãªã£ã¦ã„ãæ§˜å­ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™.</p>
<h4 id="sabiniwm-backend-backendi">sabiniwm::backend::BackendI</h4>
<p><a href="https://github.com/kenoss/sabiniwm/blob/1904a51bd3346154a60551cda70f6bfd0f3b63f2/crates/sabiniwm/src/backend/mod.rs">crates/sabiniwm/src/backend/mod.rs</a></p>
<p>smithay ã‚’åˆ©ç”¨ã—ãŸ Wayland compositor ã¯ udev/winit backend ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‚‚ã®ãŒå¤šã„ã§ã™. (winit ã¯é–‹ç™ºç”¨.)
ã“ã‚Œã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã«
<a href="https://github.com/Smithay/smithay/blob/8e49b9bb1849f0ead1ba2c7cd76802fc12ad6ac3/anvil/src/udev.rs#L158"><code>AnvilState&lt;UdevData&gt;</code> ã®æ§˜ã«å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åˆ©ç”¨</a>
ã—ã¦ã„ã¾ã™.
<code>AnvilState</code> ã‚’æ›¸ãã¨ãã«å¸¸ã«å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ trait bound ã‚’æ›¸ãå¿…è¦ãŒã‚ã£ã¦éå¸¸ã«ã‚ã‚“ã©ã„ã®ã¨,
ã“ã‚ŒãŒ anvil/src/udev.rs, anvil/src/winit.rs, anvil/src/main.rs ã§ ãƒ™ã‚¿æ›¸ã
[<a href="https://github.com/Smithay/smithay/blob/8e49b9bb1849f0ead1ba2c7cd76802fc12ad6ac3/anvil/src/udev.rs#L844">1</a>]
[<a href="https://github.com/Smithay/smithay/blob/8e49b9bb1849f0ead1ba2c7cd76802fc12ad6ac3/anvil/src/main.rs#L45">2</a>]
ã•ã‚Œã¦ã„ã‚‹ç†ç”±ã®ã²ã¨ã¤ã§ã™.</p>
<p>niri ã§ã¯ <a href="https://github.com/YaLTeR/niri/blob/v0.1.10.1/src/backend/mod.rs">enum ã§å®šç¾©</a> ã•ã‚Œã¦ã„ã¾ã™.</p>
<p>sabiniwm ã§ã¯ä¸€åº¦ <code>Box&lt;dyn BackendI&gt;</code> ã‚’çµŒã¦
[<a href="https://github.com/kenoss/sabiniwm/commit/e80231c493943dc533f1a9c95489723726920af8">1</a>]
[<a href="https://github.com/kenoss/sabiniwm/commit/b00910d8aa6b2e0cf601c025f247d58e0b2d7500">2</a>],
æœ€çµ‚çš„ã«
<a href="https://github.com/kenoss/sabiniwm/blob/1904a51bd3346154a60551cda70f6bfd0f3b63f2/crates/sabiniwm/src/backend/mod.rs">enum</a>
ã§ã®å®Ÿè£…ã¨ãªã‚Šã¾ã—ãŸ <sup class="footnote-reference"><a href="#108">8</a></sup>.</p>
<p>è¦‹æ‰€ã¨ã—ã¦ã¯ <code>scheme</code> ã‚’ä½¿ã†ã“ã¨ã§ (1-6) ã® <code>#[cfg(feature = "winit")]</code> ã®åˆ†å²ãŒã¡ã‚ƒã‚“ã¨æ‰±ãˆã¦ã„ã‚‹ã“ã¨ã§ã—ã‚‡ã†ã‹ <sup class="footnote-reference"><a href="#109">9</a></sup>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(derive_more::From)]
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">register</span><span>]
</span><span style="color:#b48ead;">pub</span><span>(</span><span style="color:#b48ead;">crate</span><span>) </span><span style="color:#b48ead;">enum </span><span>Backend {
</span><span>    Udev(udev::UdevBackend),
</span><span>    #[</span><span style="color:#bf616a;">cfg</span><span>(feature = &quot;</span><span style="color:#a3be8c;">winit</span><span>&quot;)]
</span><span>    Winit(winit::WinitBackend),
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(
</span><span>    external_trait_def = crate::external_trait_def::smithay::wayland::buffer,
</span><span>    scheme = |f| {
</span><span>        match self {
</span><span>            Self::</span><span style="color:#bf616a;">Udev</span><span>(backend) =&gt; </span><span style="color:#bf616a;">f</span><span>(backend),
</span><span>            #[</span><span style="color:#bf616a;">cfg</span><span>(feature = &quot;</span><span style="color:#a3be8c;">winit</span><span>&quot;)]           // (1-6)
</span><span>            </span><span style="color:#bf616a;">Self</span><span>::</span><span style="color:#bf616a;">Winit</span><span>(backend) =&gt; </span><span style="color:#bf616a;">f</span><span>(backend),
</span><span>        }
</span><span>    }
</span><span>)]
</span><span style="color:#b48ead;">impl </span><span>smithay::wayland::buffer::BufferHandler </span><span style="color:#b48ead;">for </span><span>Backend {}
</span></code></pre>
<h4 id="render-elements">render_elements!</h4>
<p>smithay ã§ã¯ <code>render_elements!</code> ã¨ã„ã†ãƒã‚¯ãƒ­ã§
<a href="https://github.com/Smithay/smithay/blob/8e49b9bb1849f0ead1ba2c7cd76802fc12ad6ac3/anvil/src/drawing.rs#L53-L57">æç”»è¦ç´ ã‚’å®šç¾©ã—ã¾ã™</a>.
å®šç¾©ã¯ <a href="https://github.com/Smithay/smithay/blob/8e49b9bb1849f0ead1ba2c7cd76802fc12ad6ac3/src/backend/renderer/element/mod.rs#L1333">ã“ã‚Œ</a>.
(äººé–“ã«ã¯èª­ã‚ã‚“...)</p>
<p>niri ã¯ã“ã‚Œã‚’ <a href="https://github.com/YaLTeR/niri/blob/v0.1.10.1/src/render_helpers/render_elements.rs">äººé–“ãŒèª­ã‚ã‚‹</a> ã‚ˆã†ã«ã—ã¦ã„ã¾ã™.
(å‰ã™ãã‚‹...)</p>
<p>å¿…é ˆãªã®ã¯ delegation ã™ã‚‹éƒ¨åˆ†ã ã‘ãªã®ã§ã“ã‚Œã‚‚
<a href="https://github.com/kenoss/sabiniwm/blob/7a89f6dfc4cc46db66ea5e966e59db4ac500f6bd/crates/sabiniwm/src/render.rs#L12-L38">thin_delegate ã§æ›¸ãæ›ãˆã¦ã„ã¾ã™</a>.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(derive_more::From)]
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">register</span><span>]
</span><span style="color:#b48ead;">pub enum </span><span>CustomRenderElement&lt;R&gt;
</span><span>where
</span><span>    R: Renderer,
</span><span>{
</span><span>    Pointer(PointerRenderElement&lt;R&gt;),
</span><span>    Surface(WaylandSurfaceRenderElement&lt;R&gt;),
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(external_trait_def = crate::external_trait_def::smithay::backend::renderer::element)]
</span><span style="color:#b48ead;">impl</span><span>&lt;R&gt; smithay::backend::renderer::element::Element </span><span style="color:#b48ead;">for </span><span>CustomRenderElement&lt;R&gt;
</span><span style="color:#b48ead;">where
</span><span>    R: smithay::backend::renderer::Renderer,
</span><span>    &lt;R as smithay::backend::renderer::Renderer&gt;::TextureId: </span><span style="color:#b48ead;">&#39;static</span><span>,
</span><span>    R: ImportAll + ImportMem,
</span><span>{
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">thin_delegate</span><span>::</span><span style="color:#bf616a;">fill_delegate</span><span>(external_trait_def = crate::external_trait_def::smithay::backend::renderer::element)]
</span><span style="color:#b48ead;">impl</span><span>&lt;R&gt; smithay::backend::renderer::element::RenderElement&lt;R&gt; </span><span style="color:#b48ead;">for </span><span>CustomRenderElement&lt;R&gt;
</span><span style="color:#b48ead;">where
</span><span>    R: smithay::backend::renderer::Renderer,
</span><span>    &lt;R as smithay::backend::renderer::Renderer&gt;::TextureId: </span><span style="color:#b48ead;">&#39;static</span><span>,
</span><span>    R: ImportAll + ImportMem,
</span><span>{
</span><span>}
</span></code></pre>
<p>è¤‡é›‘ãª trait bound ã§ã‚ã£ã¦ã‚‚ã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ã„ã‚‹!! <sup class="footnote-reference"><a href="#110">10</a></sup> è‰¯ã„ã§ã™ã­.</p>
<h3 id="1zhang-matome">1ç« ã¾ã¨ã‚</h3>
<ul>
<li>å•é¡Œ: Rust ã§ trait method ã‚’ delegation ã™ã‚‹ã®ã‚’æ¥½ã«ã—ãŸã„</li>
<li>è§£æ³•: <code>thin_delegate</code> ã¨ã„ã† crate ã‚’æ›¸ã„ãŸã®ã§ãã‚ŒãŒä½¿ãˆã‚‹</li>
<li>æ—¢ã« <code>sabiniwm</code> ã§è‰²ã€…ãªä½¿ã„æ–¹ã‚’ã—ã¦ã„ã‚‹</li>
</ul>
<p><a href="../2025-01-03-thin_delegate-2">2ç« </a> ã‹ã‚‰ã¯å†…éƒ¨å®Ÿè£…ã®è©±ã«ãªã‚Šã¾ã™.</p>
<div class="footnote-definition" id="101"><sup class="footnote-definition-label">1</sup>
<p>æ­£ç¢ºã«ã¯ trait function/associated function ã§ã‚ã‚‹. <a href="https://doc.rust-lang.org/reference/items/traits.html">https://doc.rust-lang.org/reference/items/traits.html</a>
ã—ã‹ã— method ã®æ–¹ãŒé€šã‚ŠãŒè‰¯ã„ã®ã§ã“ã®è¨˜äº‹ã§ã¯ãã†å‘¼ã¶.</p>
</div>
<div class="footnote-definition" id="102"><sup class="footnote-definition-label">2</sup>
<p>ã€Œã“ã‚Œã£ã¦æ—¢ã«ã‚ã‚‹ crate <code>&lt;hoge&gt;</code> ã§ã™ã‚ˆã­?ã€ãã†ã¨ã‚‚è¨€ãˆã‚‹ã—ãã†ã¨ã‚‚è¨€ãˆãªã„. 2ç« ã¨3ç« ã§è­°è«–ã—ã¾ã™.</p>
</div>
<div class="footnote-definition" id="103"><sup class="footnote-definition-label">3</sup>
<p>å®Œå…¨ã«ä¸»è¦³ã§ã—ã‹ãªã„.</p>
</div>
<div class="footnote-definition" id="104"><sup class="footnote-definition-label">4</sup>
<p>å®Œå…¨ã«ä¸»è¦³ã§ã—ã‹ãªã„. 3ç« ã§è­°è«–ã—ã¾ã™.</p>
</div>
<div class="footnote-definition" id="105"><sup class="footnote-definition-label">5</sup>
<p>GitHub issue ã§ã®å ±å‘Šã‚„ãƒ†ã‚¹ãƒˆã®è¿½åŠ ãªã©ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™.</p>
</div>
<div class="footnote-definition" id="106"><sup class="footnote-definition-label">6</sup>
<p>ã€Œã“ã‚Œã£ã¦æ—¢ã«ã‚ã‚‹ crate <a href="https://crates.io/crates/delegate"><code>delegate</code></a> ã§ã™ã‚ˆã­?ã€ã‚¢ã‚¤ãƒ‡ã‚¢å…ƒã¯ãã†. 2ç« ã¨3ç« ã§è­°è«–ã—ã¾ã™.</p>
</div>
<div class="footnote-definition" id="107"><sup class="footnote-definition-label">7</sup>
<p>ã€Œã“ã‚Œã£ã¦æ—¢ã«ã‚ã‚‹ crate <a href="https://crates.io/crates/portrait"><code>portrait</code></a> ã§ã™ã‚ˆã­?ã€çµæœçš„ã«ã¯ãã†. 2ç« ã¨3ç« ã§è­°è«–ã—ã¾ã™.</p>
</div>
<div class="footnote-definition" id="108"><sup class="footnote-definition-label">8</sup>
<p>ã“ã®ã‚ãŸã‚Šã® niri ã¨ sabiniwm ã®æ¯”è¼ƒã¯ã¾ãŸåˆ¥ã®è¨˜äº‹ã§. enum ã§ã¨ã„ã†ç‚¹ã§ã¯ä¼¼ã¦ã„ã¾ã™ãŒãã“ãã“é•ã„ã¾ã™.</p>
</div>
<div class="footnote-definition" id="109"><sup class="footnote-definition-label">9</sup>
<p>ã“ã®åˆ†å²ã¯åˆ†å²äºˆæ¸¬ã§ã»ã¼ 100% å½“ãŸã‚‹ã‹ã‚‰ feature flag ã§æ¶ˆã™ã®ã¯è¶£å‘³ã§ã—ã‹ãªã„ã§ã™ã­. most-inner loop ã§ã‚‚ãªã„ã ã‚ã†ã—. ã¾ããƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã ã¨æ€ã£ã¦ãã ã•ã„.</p>
</div>
<div class="footnote-definition" id="110"><sup class="footnote-definition-label">10</sup>
<p>æ¨æ¸¬ã§ã™ãŒ, smithay ãŒã“ã†ã—ã¦ã„ã‚‹ã®ã¯å½“æ™‚è¤‡é›‘ãª trait bound ã«å¯¾ã—ã¦ enum ã‚’ delegation ã§ãã‚‹ crate ãŒãªã‹ã£ãŸã®ãŒè¦å› ã®ã²ã¨ã¤ã§ã—ã‚‡ã†. (ã—ã‚‰ã‚“ã‘ã©)
ãƒ‘ãƒ¯ãƒ¼ã§è§£æ±ºã§ãã‚‹ã¨ã“ã‚ã¯ãƒ‘ãƒ¯ãƒ¼ã§è§£æ±ºã—ã¦ã“ã ã‚ã‚‰ãªã„. ãã‚Œã‚‚ã¾ãŸæ­£è§£ã§ã™ã—ã­.</p>
</div>

    </div>
</article>

            </main>
            <footer>
                <div class="footer">
                    <small class="footer-left">
                        Â© 2021--2024. All rights reserved.
                    </small>
                    <small class="footer-right">
                        Powered by <a href="https://www.getzola.org">Zola</a>
                    </small>
                </div>
            </footer>
        </div>
    </body>
</html>
